var COMPILED=!0,goog=goog||{};goog.global=this;goog.exportPath_=function(a,b,c){a=a.split(".");c=c||goog.global;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c=c[d]?c[d]:c[d]={}:c[d]=b};goog.define=function(a,b){var c=b;COMPILED||goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,a)&&(c=goog.global.CLOSURE_DEFINES[a]);goog.exportPath_(a,c)};goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;
goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a];for(var b=a;(b=b.substring(0,b.lastIndexOf(".")))&&!goog.getObjectByName(b);)goog.implicitNamespaces_[b]=!0}goog.exportPath_(a)};goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+a?": "+a:".");};
COMPILED||(goog.isProvided_=function(a){return!goog.implicitNamespaces_[a]&&!!goog.getObjectByName(a)},goog.implicitNamespaces_={});goog.getObjectByName=function(a,b){for(var c=a.split("."),d=b||goog.global,e;e=c.shift();)if(goog.isDefAndNotNull(d[e]))d=d[e];else return null;return d};goog.globalize=function(a,b){var c=b||goog.global,d;for(d in a)c[d]=a[d]};
goog.addDependency=function(a,b,c){if(goog.DEPENDENCIES_ENABLED){var d;a=a.replace(/\\/g,"/");for(var e=goog.dependencies_,f=0;d=b[f];f++)e.nameToPath[d]=a,a in e.pathToNames||(e.pathToNames[a]={}),e.pathToNames[a][d]=!0;for(d=0;b=c[d];d++)a in e.requires||(e.requires[a]={}),e.requires[a][b]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(a){if(!COMPILED&&!goog.isProvided_(a)){if(goog.ENABLE_DEBUG_LOADER){var b=goog.getPathFromDeps_(a);if(b){goog.included_[b]=!0;goog.writeScripts_();return}}a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(a,b){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;
goog.DEPENDENCIES_ENABLED&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return"undefined"!=typeof a&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),b=a.length-1;0<=b;--b){var c=a[b].src,d=c.lastIndexOf("?"),d=-1==d?c.length:
d;if("base.js"==c.substr(d-7,7)){goog.basePath=c.substr(0,d-7);break}}},goog.importScript_=function(a){var b=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[a]&&b(a)&&(goog.dependencies_.written[a]=!0)},goog.writeScriptTag_=function(a){if(goog.inHtmlDocument_()){var b=goog.global.document;if("complete"==b.readyState){if(/\bdeps.js$/.test(a))return!1;throw Error('Cannot write "'+a+'" after document load');}b.write('<script type="text/javascript" src="'+a+'">\x3c/script>');
return!0}return!1},goog.writeScripts_=function(){function a(e){if(!(e in d.written)){if(!(e in d.visited)&&(d.visited[e]=!0,e in d.requires))for(var g in d.requires[e])if(!goog.isProvided_(g))if(g in d.nameToPath)a(d.nameToPath[g]);else throw Error("Undefined nameToPath for "+g);e in c||(c[e]=!0,b.push(e))}}var b=[],c={},d=goog.dependencies_,e;for(e in goog.included_)d.written[e]||a(e);for(e=0;e<b.length;e++)if(b[e])goog.importScript_(goog.basePath+b[e]);else throw Error("Undefined script input");
},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.typeOf=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};goog.isDef=function(a){return void 0!==a};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var b=goog.typeOf(a);return"array"==b||"object"==b&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};
goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if(a.clone)return a.clone();var b="array"==b?[]:{},c;for(c in a)b[c]=goog.cloneObject(a[c]);return b}return a};goog.bindNative_=function(a,b,c){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}};goog.bind=function(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}};goog.mixin=function(a,b){for(var c in b)a[c]=b[c]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(a);else{var b=goog.global.document,c=b.createElement("script");c.type="text/javascript";c.defer=!1;c.appendChild(b.createTextNode(a));b.body.appendChild(c);
b.body.removeChild(c)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,b){var c=function(a){return goog.cssNameMapping_[a]||a},d=function(a){a=a.split("-");for(var b=[],d=0;d<a.length;d++)b.push(c(a[d]));return b.join("-")},d=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?c:d:function(a){return a};return b?a+"-"+d(b):d(a)};goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,b){var c=b||{},d;for(d in c){var e=(""+c[d]).replace(/\$/g,"$$$$");a=a.replace(RegExp("\\{\\$"+d+"\\}","gi"),e)}return a};goog.getMsgWithFallback=function(a,b){return a};goog.exportSymbol=function(a,b,c){goog.exportPath_(a,b,c)};goog.exportProperty=function(a,b,c){a[b]=c};
goog.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a};
goog.base=function(a,b,c){var d=arguments.callee.caller;if(goog.DEBUG&&!d)throw Error("arguments.caller not defined.  goog.base() expects not to be running in strict mode. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(d.superClass_)return d.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var e=Array.prototype.slice.call(arguments,2),f=!1,g=a.constructor;g;g=g.superClass_&&g.superClass_.constructor)if(g.prototype[b]===d)f=!0;else if(f)return g.prototype[b].apply(a,
e);if(a[b]===d)return a.constructor.prototype[b].apply(a,e);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){a.call(goog.global)};(function(){var a=angular.module("gn_search_manager_service",[]),b=function(a,b,e){var f=function(a){var b={},d=-1;a[0]&&a[0]["@count"]&&(a.summary=a[0],d=a[0]["@count"]);for(var c in a.summary)"@count"!=c?(b[c]=a.summary[c],b[c].name=c):d=a.summary[c];if(a.metadata)for(c=0;c<a.metadata.length||!$.isArray(a.metadata)&&1>c;c++){var e=$.isArray(a.metadata)?a.metadata[c]:a.metadata;"string"===typeof e.image&&(e.image=[e.image]);"string"===typeof e.link&&(e.link=[e.link]);e["geonet:info"].selected="true"==
e["geonet:info"].selected}c=[];a.metadata&&a.metadata.length?c=a.metadata:a.metadata&&(c=[a.metadata]);return{facet:b,count:d,metadata:c}},g=function(b,d){var k=a.defer();e.get(b).success(function(a,b){k.resolve(f(a))}).error(function(a,b){k.reject(d)});return k.promise};return{search:g,register:function(a,b){return function(){var c=b[a.pager],d="";b[a.filter]&&$.each(b[a.filter],function(a,b){d+="&"+a+"="+b});g("q@json?fast=index"+d+"&from="+(c.currentPage*c.hitsPerPage+1)+"&to="+(c.currentPage+
1)*c.hitsPerPage,a.error).then(function(d){b[a.records]=d;c.count=parseInt(d.count);c.pages=Math.round(d.count/c.hitsPerPage,0);a.success&&a.success(d)})}}}};b.$inject=["$q","$rootScope","$http"];a.factory("gnSearchManagerService",b)})();(function(){angular.module("gn_search_manager",["gn_search_manager_service"])})();(function(){angular.module("gn_cat_controller",["gn_search_manager"]).controller("GnCatController",["$scope","$http","$q","$rootScope","$translate","gnSearchManagerService",function(a,b,c,d,e,f){a.version="0.0.1";a.lang=location.href.split("/")[5];a.langs={fre:"fr",eng:"en",spa:"sp"};a.url="";a.base="../../catalog/";a.proxyUrl="../../proxy?url=";a.logoPath="../../images/harvesting/";a.pages={home:"home",admin:"admin.console",signin:"catalog.signin"};a.selectedRecordsCount=0;a.profiles=["RegisteredUser",
"Editor","Reviewer","UserAdmin","Administrator"];a.info={};a.user={};a.authenticated=!1;a.initialized=!1;a.searchInfo={};a.status=null;var g={title:"",link:"",msg:"",error:"",type:"info",timeout:-1};a.loadCatalogInfo=function(){c.when("start").then(function(c){url=a.url+"info@json?type=site&type=auth";return b.get(url).success(function(b,c){a.info=b;a.info.site.lastUpdate=new Date;a.initialized=!0}).error(function(a,b,c,f){d.$broadcast("StatusUpdated",{title:e("somethingWrong"),msg:e("msgNoCatalogInfo"),
type:"danger"})})}).then(function(c){url=a.url+"info@json?type=me";return b.get(url).success(function(b,c){a.user=b.me;a.authenticated="false"!==b.me["@authenticated"]}).error(function(a,b,c,f){d.$broadcast("StatusUpdated",{msg:e("msgNoUserInfo")})})}).then(function(b){url="qi@json?summaryOnly=true";return f.search(url).then(function(b){a.searchInfo=b})})};a.$on("loadCatalogInfo",function(b,c){a.loadCatalogInfo()});a.clearStatusMessage=function(){a.status=null;$(".gn-info").hide()};a.$on("StatusUpdated",
function(b,c){a.status={};$.extend(a.status,g,c);$(".gn-info").show();0<a.status.timeout&&setTimeout(function(){a.clearStatusMessage()},1E3*a.status.timeout)});a.selectMetadata=function(a){console.log("select "+a)};a.selectAllMetadata=function(){console.log("select all ")};a.loadCatalogInfo()}])})();(function(){var a=angular.module("gn_utility_service",[]);a.factory("gnUtilityService",function(){var a=function(c){angular.forEach(c,function(d,e){if("string"==typeof d)if("true"==d||"false"==d)c[e]="true"==d;else{if("on"==d||"off"==d)c[e]="on"==d}else a(d)})};return{scrollTo:function(a,b,e,f){$(document.body).animate({scrollTop:b?$(a).offset().top:$(a).position().top},e,f)},isInView:function(a){var b=$(window).scrollTop(),e=b+window.innerHeight,f=parseInt($(a).offset().top);a=parseInt(f+$(a).height());
return a<e&&a>b||f>b&&f<e||f<b&&a>e},serialize:function(a){a=$(a);var b=[];$(":checkbox:not(:checked)",a).each(function(){b.push(encodeURIComponent(this.name)+"=false")});return a.serialize()+(b.length?"&"+b.join("&").replace(/%20/g,"+"):"")},parseBoolean:a,toCsv:function(a,b,e){var f,g,l=[],m,k,r,h,n="",p,t;if("undefined"===typeof b||null===b)b='"';if("undefined"===typeof e||null===e)e=",";f=0;for(g=a.length;f<g;f+=1){r=a[f];h="";if(0===f){for(m in r)r.hasOwnProperty(m)&&(l.push(m),h+=[b,m,b,e].join(""));
h=h.substring(0,h.length-1);n+=h}n+="\n";h="";p=0;for(t=l.length;p<t;p+=1){m=l[p];k=r[m];0<p&&(h+=",");var q='"',s=typeof k,u=void 0;if("undefined"===typeof q||null===q)q='"';u="undefined"===s||null===s?"":"string"===s?q+k+q:String(k);h+=u}n+=h}return n},getUrlParameter:function(a){var b=null;angular.forEach(window.location.search.replace("?","").split("&"),function(e){0===e.indexOf(a)&&(b=e.split("=")[1])});return b}}});a.filter("gnFromNow",function(){return function(a){return moment(new Date(a)).fromNow()}})})();(function(){angular.module("gn_utility",["gn_utility_service"])})();(function(){angular.module("gn_pagination_directive",[]).directive("gnPagination",["gnMetadataManagerService",function(a){return{restrict:"A",replace:!0,transclude:!0,scope:{config:"=gnPagination"},templateUrl:"../../catalog/components/pagination/partials/pagination.html",link:function(a,c,d){a.previous=function(){0<a.config.currentPage&&(a.config.currentPage-=1)};a.next=function(){a.config.currentPage<a.config.pages&&(a.config.currentPage+=1)}}}}])})();(function(){angular.module("gn_pagination",["gn_pagination_directive"])})();(function(){var a=angular.module("gn_metadata_manager_service",[]),b=function(a,b,e){var f=function(b,d,f){var k=a.defer();e.get("metadata.select@json?"+(b?"id="+b:"")+(d?"":"&selected="+f)).success(function(a,b){k.resolve(a)}).error(function(a,b){k.reject(error)});return k.promise};return{select:function(a,b){return f(a,b,"add")},unselect:function(a){return f(a,!1,"remove")},selectAll:function(){return f(null,!1,"add-all")},selectNone:function(){return f(null,!1,"remove-all")},view:function(a){window.open("../../?uuid="+
a["geonet:info"].uuid,"gn-view")},edit:function(a){location.href="catalog.edit?#/metadata/"+a["geonet:info"].id}}};b.$inject=["$q","$rootScope","$http"];a.factory("gnMetadataManagerService",b)})();(function(){angular.module("gn_metadata_manager",["gn_metadata_manager_service"])})();(function(){angular.module("gn_language_switcher_directive",["pascalprecht.translate"]).directive("gnLanguageSwitcher",["$translate",function(a){return{restrict:"A",replace:!1,transclude:!0,scope:{langs:"=langs",lang:"=gnLanguageSwitcher"},template:'<select class="form-control" ng-model="lang" ng-options="key as (key | translate) for (key, value) in langs"></select>',link:function(a,c,d){a.$watch("lang",function(c){var d=location.href.split("/");c!=d[5]&&(d[5]=c,location.href=d.join("/"),moment&&
moment.lang(a.langs[c]))})}}}])})();(function(){angular.module("gn_language_switcher",["gn_language_switcher_directive"])})();(function(){angular.module("gn_search_results_directive",[]).directive("gnSearchResults",["gnMetadataManagerService",function(a){return{restrict:"A",replace:!0,transclude:!0,scope:{allowSelection:"@allowSelection",authenticated:"=authenticated",selectedRecordsCount:"=selectedRecordsCount",searchResults:"=gnSearchResults"},templateUrl:"../../catalog/components/searchresults/partials/searchresults.html",link:function(b,c,d){b.select=function(c,d){var g=c["geonet:info"].uuid;($("#gn-record-"+g).hasClass("active")?
a.unselect:a.select)(g).then(function(a){b.selectedRecordsCount=a[0];c["geonet:info"].selected=!0!==c["geonet:info"].selected})};b.selectAll=function(c){(c?a.selectAll:a.selectNone)().then(function(a){b.selectedRecordsCount=a[0];angular.forEach(b.searchResults.metadata,function(a){a["geonet:info"].selected=c?!0:!1})})};b.view=function(b,c){a.view(b)};b.edit=function(b,c){a.edit(b)}}}}])})();(function(){angular.module("gn_search_results",["gn_search_results_directive"])})();(function(){angular.module("gn_search_controller",[]).controller("GnSearchController",["$scope","$routeParams","$http","$rootScope","$translate","$compile","gnMetadataManagerService","gnSearchManagerService","gnUtilityService",function(a,b,c,d,e,f,g,l,m){a.searchRecordsFilter="";a.searchRecords=null;a.searchRecordsPagination={pages:-1,currentPage:0,hitsPerPage:20};searchFn=l.register({records:"searchRecords",filter:"searchRecordsFilter",pager:"searchRecordsPagination"},a);a.searchRecordsSearchFor=
function(b){a.searchRecordsFilter={any:b?b.target.value:""};a.searchRecordsPagination.currentPage=0;searchFn()};a.$watch("searchRecordsPagination.currentPage",function(){searchFn()})}])})();(function(){var a=angular.module("gn","ngRoute pascalprecht.translate gn_language_switcher gn_utility gn_search_manager gn_metadata_manager gn_search_results gn_pagination gn_cat_controller gn_search_controller".split(" "));a.constant("$LOCALES",["core"]);a.factory("localeLoader",["$http","$q",function(a,c){return function(d){var e=[];angular.forEach(d.locales,function(f,g){var l=d.prefix+d.key+"-"+f+d.suffix,m=c.defer();e.push(m.promise);a({method:"GET",url:l}).success(function(a,b,c,d){m.resolve(a)}).error(function(a,
b,c,e){m.reject(d.key)})});return c.all(e)}}]);a.config(["$translateProvider","$LOCALES",function(a,c){a.useLoader("localeLoader",{locales:c,prefix:"../../catalog/locales/",suffix:".json"});var d=location.href.split("/")[5].substring(0,2)||"en";a.preferredLanguage(d);moment.lang(d)}])})();(function(){var a=angular.module("gn_login_controller",[]);a.constant("$LOCALES",["core"]);a.controller("GnLoginController",["$scope","$http","$rootScope","$translate","$location","$window","gnUtilityService",function(a,c,d,e,f,g,l){a.registrationStatus=null;a.passwordReminderStatus=null;a.sendPassword=!1;a.password=null;a.passwordCheck=null;a.userToRemind=null;a.changeKey=null;a.passwordUpdated=!1;a.redirectUrl=l.getUrlParameter("redirect");a.setSendPassword=function(c){a.sendPassword=c;$("#username").focus()};
a.register=function(f){c.get("create.account@json?"+$(f).serialize()).success(function(c){a.registrationStatus=c}).error(function(a){d.$broadcast("StatusUpdated",{title:e("registrationError"),error:a,timeout:0,type:"danger"})})};a.remindMyPassword=function(f){c.get("password.reminder@json?"+$(f).serialize()).success(function(c){a.passwordReminderStatus=c;a.sendPassword=!1}).error(function(a){d.$broadcast("StatusUpdated",{title:e("passwordReminderError"),error:a,timeout:0,type:"danger"})})};a.updatePassword=
function(f){c.get("password.change@json?"+$(f).serialize()).success(function(c){"null"==c&&(a.passwordUpdated=!0)}).error(function(a){d.$broadcast("StatusUpdated",{title:e("passwordUpdateError"),error:a,timeout:0,type:"danger"})})};-1!==g.location.pathname.indexOf("new.password")&&(a.userToRemind=l.getUrlParameter("username"),a.changeKey=l.getUrlParameter("changeKey"))}])})();(function(){var a=angular.module("gn_login",["gn","gn_login_controller"]);a.constant("$LOCALES",["core"]);a.config(["$translateProvider","$LOCALES",function(a,c){a.useLoader("localeLoader",{locales:c,prefix:"../../catalog/locales/",suffix:".json"});var d=location.href.split("/")[5].substring(0,2)||"en";a.preferredLanguage(d);moment.lang(d)}])})();
